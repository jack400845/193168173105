<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POS Vollständig</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
  <div class="max-w-full mx-auto bg-white p-6 rounded shadow-lg">
    <div class="flex justify-between border-b pb-4 mb-4">
      <div>
        <h1 class="text-2xl font-bold">POS System</h1>
        <p>Kassen-ID: <span id="kassenID">---</span></p>
        <p>Datum & Uhrzeit: <span id="timestamp">---</span></p>
      </div>
      <div class="flex gap-2">
        <button onclick="pauseUser()" class="bg-gray-500 text-white px-4 py-2 rounded">Pause</button>
        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded">Abmelden</button>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 h-[400px]">
      <div class="bg-gray-200 p-4 rounded overflow-y-auto">
        <h2 class="text-xl font-semibold mb-2">Warenkorb</h2>
        <ul id="cart"></ul>
        <p class="mt-2 font-semibold">Summe: <span id="total">0.00</span> €</p>
      </div>
      <div class="bg-gray-200 p-4 rounded">
        <h2 class="text-xl font-semibold mb-2">Produkte</h2>
        <div id="products" class="grid grid-cols-3 gap-2"></div>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mt-4">
      <div class="grid grid-cols-3 gap-2 bg-gray-100 p-4 rounded h-[400px]">
        <button onclick="appendNum('1')" class="bg-gray-300 rounded">1</button>
        <button onclick="appendNum('2')" class="bg-gray-300 rounded">2</button>
        <button onclick="appendNum('3')" class="bg-gray-300 rounded">3</button>
        <button onclick="appendNum('4')" class="bg-gray-300 rounded">4</button>
        <button onclick="appendNum('5')" class="bg-gray-300 rounded">5</button>
        <button onclick="appendNum('6')" class="bg-gray-300 rounded">6</button>
        <button onclick="appendNum('7')" class="bg-gray-300 rounded">7</button>
        <button onclick="appendNum('8')" class="bg-gray-300 rounded">8</button>
        <button onclick="appendNum('9')" class="bg-gray-300 rounded">9</button>
        <button onclick="appendNum('0')" class="bg-gray-300 rounded">0</button>
        <button onclick="clearInput()" class="bg-red-400 rounded">Löschen</button>
        <button onclick="confirmInput()" class="bg-green-400 rounded">Eingabe</button>
      </div>

      <div class="grid grid-cols-2 gap-2 bg-gray-300 p-4 rounded h-[400px]">
        <button onclick="showBonjournal()" class="bg-white border rounded">Bonjournal</button>
        <button onclick="goHome()" class="bg-white border rounded">Home</button>
        <button onclick="setAction('einzahlung')" class="bg-white border rounded">Einzahlung</button>
        <button onclick="setAction('auszahlung')" class="bg-white border rounded">Auszahlung</button>
        <button onclick="auftrag()" class="bg-white border rounded">Auftrag</button>
        <button onclick="removeItem()" class="bg-pink-400 rounded">Zeilenstorno</button>
        <button onclick="setAction('preis')" class="bg-yellow-400 rounded">Neuer Preis</button>
        <button onclick="setAction('rabatt')" class="bg-yellow-400 rounded">Rabatt</button>
        <button onclick="bonStorno()" class="bg-red-500 text-white rounded">Bonstorno</button>
        <button onclick="abbrechen()" class="bg-red-500 text-white rounded">Bonabbruch</button>
        <button onclick="bezahlen()" class="bg-blue-500 text-white rounded">Bezahlen</button>
        <button onclick="setAction('menge')" class="bg-gray-400 rounded">Menge</button>
      </div>
    </div>
  </div>

<script>
let cart = [], bons = [], input = "", menge = 1, aktion = null;

const products = [
  { name: "Chips", price: 1.5 },
  { name: "Cola", price: 2 },
  { name: "T-Shirt", price: 15 },
  { name: "USB-Stick", price: 8 }
];

function renderProducts() {
  const el = document.getElementById("products");
  el.innerHTML = "";
  products.forEach(p => {
    const btn = document.createElement("button");
    btn.className = "bg-blue-500 text-white rounded";
    btn.textContent = p.name + " (" + p.price.toFixed(2) + " €)";
    btn.onclick = () => {
      const existing = cart.find(i => i.name === p.name);
      if (existing) existing.qty += menge;
      else cart.push({ ...p, qty: menge });
      menge = 1;
      renderCart();
    };
    el.appendChild(btn);
  });
}

function renderCart() {
  const ul = document.getElementById("cart");
  ul.innerHTML = "";
  let sum = 0;
  cart.forEach(item => {
    const line = `${item.name} x${item.qty} – ${item.price.toFixed(2)} € = ${(item.price * item.qty).toFixed(2)} €`;
    const li = document.createElement("li");
    li.textContent = line;
    ul.appendChild(li);
    sum += item.price * item.qty;
  });
  document.getElementById("total").textContent = sum.toFixed(2);
}

function appendNum(n) { input += n; }
function clearInput() { input = ""; }
function confirmInput() {
  const val = parseFloat(input);
  if (!isNaN(val)) {
    if (aktion === "rabatt" && cart.length) cart[cart.length-1].price -= val;
    else if (aktion === "preis" && cart.length) cart[cart.length-1].price = val;
    else if (aktion === "menge") menge = val;
    else if (aktion === "einzahlung" || aktion === "auszahlung") alert(`${aktion === "einzahlung" ? "Einzahlung" : "Auszahlung"}: ${val} €`);
    renderCart();
  }
  input = ""; aktion = null;
}
function setAction(a) { aktion = a; input = ""; }
function removeItem() { cart.pop(); renderCart(); }
function bezahlen() { if (cart.length) { bons.push([...cart]); alert("Bezahlung OK"); cart = []; renderCart(); } }
function bonStorno() { if (bons.length) { bons.pop(); alert("Letzter Bon storniert."); } }
function abbrechen() { cart = []; renderCart(); alert("Bon abgebrochen."); }
function showBonjournal() { alert(`Bons gespeichert: ${bons.length}`); }
function auftrag() { cart.push({ name: "Auftrag", price: 19.99, qty: 1 }); renderCart(); }
function goHome() { cart = []; renderCart(); input = ""; aktion = null; }
function pauseUser() { alert("Pause – Benutzer gespeichert."); }
function logout() { alert("Abgemeldet."); }

function init() {
  renderProducts();
  document.getElementById("kassenID").textContent = Math.floor(10000 + Math.random() * 89999);
  setInterval(() => {
    document.getElementById("timestamp").textContent = new Date().toLocaleString();
  }, 1000);
}
window.onload = init;
</script>
</body>
</html>
