
<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<title>POS System – Interaktive Version</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
<div class="bg-white max-w-6xl mx-auto p-4 rounded shadow">
<div class="flex justify-between items-center mb-4">
<div>
<h1 class="text-2xl font-bold">POS System</h1>
<p>Kassen-ID: <span id="kassenID">---</span></p>
<p>Benutzer: <span id="userDisplay">---</span></p>
<p>Datum &amp; Uhrzeit: <span id="timestamp">---</span></p>
</div>
<div class="flex gap-2">
<button class="bg-gray-400 text-white px-4 py-2 rounded" onclick="pause()">Pause</button>
<button class="bg-red-500 text-white px-4 py-2 rounded" onclick="logout()">Abmelden</button>
</div>
</div>
<div class="grid grid-cols-2 gap-4 mb-4">
<div>
<h2 class="text-lg font-semibold mb-2">Warenkorb</h2>
<ul class="bg-gray-100 p-2 rounded h-48 overflow-y-auto mb-2" id="cartList"></ul>
<p class="font-bold">Gesamt: <span id="total">0.00</span> €</p>
</div>
<div>
<h2 class="text-lg font-semibold mb-2">Produkte</h2>
<div class="grid grid-cols-2 gap-2 bg-gray-100 p-2 rounded h-48 overflow-y-auto" id="products"></div>
</div>
</div>
<div class="grid grid-cols-2 gap-4 mb-4">
<div class="grid grid-cols-3 gap-2">
<input class="col-span-3 p-2 border text-center text-lg rounded" disabled="" id="inputDisplay" placeholder="Eingabe..."/>
<button class="bg-gray-300 rounded" onclick="appendInput('1')">1</button>
<button class="bg-gray-300 rounded" onclick="appendInput('2')">2</button>
<button class="bg-gray-300 rounded" onclick="appendInput('3')">3</button>
<button class="bg-gray-300 rounded" onclick="appendInput('4')">4</button>
<button class="bg-gray-300 rounded" onclick="appendInput('5')">5</button>
<button class="bg-gray-300 rounded" onclick="appendInput('6')">6</button>
<button class="bg-gray-300 rounded" onclick="appendInput('7')">7</button>
<button class="bg-gray-300 rounded" onclick="appendInput('8')">8</button>
<button class="bg-gray-300 rounded" onclick="appendInput('9')">9</button>
<button class="bg-gray-300 rounded" onclick="appendInput('0')">0</button>
<button class="bg-gray-300 rounded" onclick="appendInput('.')">,</button>
<button class="bg-red-400 rounded col-span-2" onclick="clearInput()">Löschen</button>
<button class="bg-green-400 rounded" onclick="confirmInput()">Eingabe</button>
</div>
<div class="grid grid-cols-2 gap-2">
<button class="bg-yellow-300 rounded" onclick="applyInput('preis')">Neuer Preis</button>
<button class="bg-yellow-300 rounded" onclick="applyInput('rabatt')">Rabatt</button>
<button class="bg-gray-400 rounded" onclick="applyInput('menge')">Menge</button>
<button class="bg-white border rounded" onclick="einzahlung()">Einzahlung</button>
<button class="bg-white border rounded" onclick="auszahlung()">Auszahlung</button>
<button class="bg-white border rounded" onclick="auftrag()">Auftrag</button>
<button class="bg-pink-300 rounded" onclick="removeLast()">Zeilenstorno</button>
<button class="bg-red-300 rounded" onclick="prepareStorno()">Bonstorno</button>
<button class="bg-red-500 text-white rounded" onclick="abbruchBon()">Bonabbruch</button>
<button class="bg-white border rounded" onclick="toggleBonjournal()">Bonjournal</button>
<button class="bg-blue-500 text-white rounded col-span-2 text-lg py-2" onclick="pay()">Bezahlen</button>
</div>
</div>
<div class="hidden" id="bonjournalWrapper">
<h2 class="font-semibold mb-2">Bonjournal</h2>
<ul class="bg-gray-100 p-2 rounded h-48 overflow-y-auto" id="bonjournal"></ul>
</div>
</div>
<script>
function openCashOut(type, amount) {
  localStorage.setItem("cashoutType", type);
  localStorage.setItem("cashoutAmount", parseFloat(amount).toFixed(2));
  localStorage.setItem("cashoutUser", localStorage.getItem("user") || "admin");
  window.open("checkout.html", "_blank");
}

function pay() {
  const amount = parseFloat(document.getElementById("total")?.textContent || "0");
  if (!isNaN(amount) && amount > 0) {
    openCashOut("bezahlung", amount);
  } else {
    alert("Kein gültiger Betrag im Warenkorb.");
  }
}

function einzahlung() {
  const amount = prompt("Einzahlungsbetrag:");
  if (amount && !isNaN(amount)) openCashOut("einzahlung", amount);
}

function auszahlung() {
  const amount = prompt("Auszahlungsbetrag:");
  if (amount && !isNaN(amount)) openCashOut("auszahlung", amount);
}
</script></body>
</html>
